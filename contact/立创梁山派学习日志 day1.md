# 立创梁山派学习日志

## day1

今日按文档绘制梁山派智能小车扩展板的原理图和pcb，一开始没有看视频，只按文档去画，不知道要用专业版，用了标准版，当缺少梁山派板子模型时发现用的是标准版，导入标准板工程到专业版后大量的件缺少封装，于是在专业版的封装管理器里面一个个指定封装，最后才终于画完原理图。

画PCB时，没有看视频，由于不知道能过孔，走了很多线，最后也没有理出来，会互相干涉，后面才知道可以过孔。

## day2

今日焊接PCB，使用锡膏焊接因为不会挤焊锡膏，导致不少芯片都连锡了，贴片电阻还有好多“立碑”了，在热台上把立碑的贴片按下去才拿下来，然后听硬件说的给连锡的地方猛加松香，试了确实有效果，连锡的地方都被划拉开了，才终于焊好

## day3

今天琢磨了一上午GD32是怎么配置时钟树的，以前都是用STM32CubeMX图形化配置，脱离了这个工具一下还不知道怎么下手，详细阅读手册后也是知道了GD32库函数和HAL库的不同之处

## day4

今天给板子做了PWM和外部中断，它最不好用的就是它一个中断线只能强制绑定一个IO而不是属于这条线的IO都会触发再由用户判断是哪个IO触发，因为原理图设计时两个按键都在一条中断线上，导致只有一个按键能使用外部中断来触发，另一个只能轮询，太不灵活了。pwm的计算方式就还是那样，和STM32的逻辑一样

## day5

今天跑通了循迹和超声波模块，大多为移植例程，没什么意思，自己实现出来的代码和例程逻辑也差不多，调试时发现循迹时有概率跑歪，查原因是电机正反焊的不太对，有两个电机的前转和倒转的IO和设计时用的相反，导致触发到那个控制状态时走歪来

## day6

今天移植了FreeRTOS到梁山派上，学习了一次从FreeRTOS的源码移植到具体单片机的流程，对FreeRTOS的内核裁剪配置有了更深的印象，以前都是用CubeMX自动生成的CMSIS-RTOS套壳FreeRTOS，都是图形化配置，今天纯代码移植印象更深刻了，最后也跑通了，实现了多线程并发运行

## day7

今天按需求写了一下避障，用了一个很死的逻辑，通过延时去控制各项行为的时间，但是基于它不能精确的控制自己的姿态和获取姿态数据，也没什么好玩的了，能出来就行，反正都是调参和运气

## day8 & day9

因完成任务故无什么具体进展，大多为调整循迹和避障参数

## day10

最后检验44s跑完，虽然有点不尽人意，但是自己也没有画特别多时间去调试，输的心甘情愿吧
